(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207ba3"],{a284:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bioassay-body"},[a("video",{attrs:{width:"640",height:"480",id:"myVideo"}}),a("input",{attrs:{type:"button",name:"",value:"开始",id:"startBtn"}}),a("input",{attrs:{type:"button",name:"",value:"停止",id:"stopBtn"}}),a("input",{attrs:{type:"button",name:"",value:"重新开始录像",id:"ppBtn"}})])}],o=(a("accc"),a("0d03"),a("b0c0"),a("ac1f"),a("5319"),a("1157")),d=a.n(o),r=a("47a7"),s={name:"Bioassay",data:function(){return{aa:"",video:null,mediaRecorder:null}},mounted:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,this.init()},methods:{init:function(){var e=this,t=this,a={audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.getUserMedia(a).then((function(e){t.video=document.querySelector("video"),t.video.srcObject=e,t.video.onloadedmetadata=function(){t.video.play()},t.mediaRecorder=new r(e),t.mediaRecorder.mimeType="video/mp4",t.mediaRecorder.ondataavailable=function(e){""==t.aa&&(t.uploadToPHPServer(e),t.aa=e)}})),d()("#startBtn").click((function(){console.log("start"),e.mediaRecorder.start()})),d()("#stopBtn").click((function(){console.log("stop"),e.mediaRecorder.stop()})),d()("#ppBtn").click((function(){""!==e.aa&&(e.aa="",e.mediaRecorder.start())}))},uploadToPHPServer:function(e){var t=new File([e],"msr-"+(new Date).toISOString().replace(/:|\./g,"-")+".webm",{type:"video/mp4"}),a=new FormData;a.append("video-filename",t.name),a.append("video-blob",t),console.log(a),this.makeXMLHttpRequest("https:/你的地址/data/save.php",a,(function(){var e="https://你的地址"+t.name;console.log("File uploaded to this path:",e)}))},makeXMLHttpRequest:function(e,t,a){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&a()},n.open("POST",e),n.send(t)}}},c=s,u=a("2877"),l=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d207ba3.b80eac2b.js.map